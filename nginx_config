# allcare
upstream nodejs__upstream {
        server localhost:3000;
        keepalive 64;
}

server {

        listen 80;
        server_name
                54.88.206.233
                ""
                ;

        access_log /var/log/nginx/klr.log;

        location / {
                root /home/ubuntu/www/klr;
                try_files $uri $uri/index.html;
        }

        location /api/ {
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header Host $http_host;
                proxy_set_header X-NginX-Proxy true;
                proxy_set_header Connection "";
                proxy_http_version 1.1;
                proxy_pass http://nodejs__upstream;
        }

        location /admin/ {
                alias /home/ubuntu/www/allcare_admin/;
        }

        location /driver-info/ {
                alias /home/ubuntu/www/allcare_driver_portal/;
        }

        location /mobile/passenger/ {
                alias /home/ubuntu/www/allcare_passenger/;
        }

        location /mobile/driver/ {
               alias /home/ubuntu/www/allcare_driver/;
        }

        location /mobile/agent/ {
               alias /home/ubuntu/www/allcare_agent/;
        }
}
